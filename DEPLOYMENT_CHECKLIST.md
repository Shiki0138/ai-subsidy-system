# ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯ã€Vercel/Hugging Faceã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤å‰ã«ç¢ºèªã™ã¹ãé …ç›®ã‚’ã¾ã¨ã‚ã¦ã„ã¾ã™ã€‚

## ğŸ“‹ é–‹ç™ºç’°å¢ƒã§ã®äº‹å‰ç¢ºèªäº‹é …

### 1. åŸºæœ¬å‹•ä½œç¢ºèª
- [ ] `npm run dev` ã§ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ãŒèµ·å‹•ã™ã‚‹
- [ ] ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] å„è£œåŠ©é‡‘ç”³è«‹ãƒœã‚¿ãƒ³ãŒ404ã‚¨ãƒ©ãƒ¼ãªãå‹•ä½œã™ã‚‹
- [ ] æ³•äººç•ªå·å…¥åŠ›â†’ã€Œåæ˜ ã€ãƒœã‚¿ãƒ³ã§ä¼æ¥­æƒ…å ±ãŒå–å¾—ã•ã‚Œã‚‹
- [ ] ç”³è«‹æ›¸ä½œæˆãƒ•ãƒ­ãƒ¼ãŒæœ€å¾Œã¾ã§å®Œäº†ã™ã‚‹

### 2. æ©Ÿèƒ½ç¢ºèª
- [ ] **Gemini APIçµ±åˆ**: ç”³è«‹æ›¸ç”Ÿæˆæ™‚ã«AIãŒå‹•ä½œã™ã‚‹ï¼ˆãƒ¢ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰å«ã‚€ï¼‰
- [ ] **çµ±è¨ˆã‚°ãƒ©ãƒ•**: ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã«ã‚°ãƒ©ãƒ•ãŒè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] **è‡ªå‹•ä¿å­˜**: ãƒ•ã‚©ãƒ¼ãƒ å…¥åŠ›ãŒè‡ªå‹•ä¿å­˜ã•ã‚Œã‚‹
- [ ] **é€šçŸ¥æ©Ÿèƒ½**: é€šçŸ¥APIãŒæ­£ã—ãå‹•ä½œã™ã‚‹
- [ ] **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ**: ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã®ä¿å­˜ãƒ»é©ç”¨ãŒå‹•ä½œã™ã‚‹

### 3. ã‚¨ãƒ©ãƒ¼ãƒã‚§ãƒƒã‚¯
- [ ] ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã«ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦ã„ãªã„
- [ ] ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¿ãƒ–ã§404ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¦ã„ãªã„
- [ ] TypeScriptã®ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ãŒãªã„

## ğŸ”§ ãƒ‡ãƒ—ãƒ­ã‚¤å‰ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯

### å®Ÿè¡Œã‚³ãƒãƒ³ãƒ‰
```bash
# 1. è‡ªå‹•ãƒã‚§ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œ
./scripts/pre-deploy-check.sh

# 2. ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸå ´åˆã¯è‡ªå‹•ä¿®æ­£ã‚’è©¦ã¿ã‚‹
./scripts/fix-common-errors.sh

# 3. å†åº¦ãƒã‚§ãƒƒã‚¯ã‚’å®Ÿè¡Œ
./scripts/pre-deploy-check.sh
```

### ãƒã‚§ãƒƒã‚¯é …ç›®
1. **Node.jsãƒãƒ¼ã‚¸ãƒ§ãƒ³** (>= 18.17.0)
2. **å¿…é ˆãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨**
3. **ç’°å¢ƒå¤‰æ•°ã®è¨­å®š**
4. **ä¾å­˜é–¢ä¿‚ã®æ•´åˆæ€§**
5. **TypeScriptã‚³ãƒ³ãƒ‘ã‚¤ãƒ«**
6. **ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ**
7. **ESLintãƒã‚§ãƒƒã‚¯**
8. **ä¸è¦ãƒ•ã‚¡ã‚¤ãƒ«ã®é™¤å¤–**
9. **ãƒãƒ¼ãƒ‰ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã®æ¤œå‡º**
10. **APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ç¢ºèª**

## ğŸŒ Vercelã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

### ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
Vercelãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ä»¥ä¸‹ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šï¼š

```env
# Supabaseï¼ˆå¿…é ˆï¼‰
NEXT_PUBLIC_SUPABASE_URL=your-supabase-url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_KEY=your-service-key

# AI APIï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ - æœªè¨­å®šæ™‚ã¯ãƒ¢ãƒƒã‚¯ãƒ¢ãƒ¼ãƒ‰ï¼‰
GEMINI_API_KEY=your-gemini-api-key

# API URLï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
NEXT_PUBLIC_API_URL=https://your-api-url.vercel.app
```

### ãƒ“ãƒ«ãƒ‰è¨­å®š
- **Framework Preset**: Next.js
- **Build Command**: `cd frontend && npm install && npm run build`
- **Output Directory**: `frontend/.next`
- **Install Command**: `npm install`

### ã‚ˆãã‚ã‚‹ã‚¨ãƒ©ãƒ¼ã¨å¯¾å‡¦æ³•

#### 1. Chart.jsé–¢é€£ã®ã‚¨ãƒ©ãƒ¼
```bash
Error: Cannot find module 'chart.js'
```
**å¯¾å‡¦æ³•**: 
```bash
cd frontend && npm install chart.js react-chartjs-2
```

#### 2. TypeScriptã‚¨ãƒ©ãƒ¼
```bash
Type error: Cannot find name 'Window'
```
**å¯¾å‡¦æ³•**: `global.d.ts`ãƒ•ã‚¡ã‚¤ãƒ«ãŒæ­£ã—ãé…ç½®ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

#### 3. ç’°å¢ƒå¤‰æ•°ã‚¨ãƒ©ãƒ¼
```bash
Error: Missing environment variables
```
**å¯¾å‡¦æ³•**: Vercelãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®š

#### 4. ãƒ“ãƒ«ãƒ‰ãƒ¡ãƒ¢ãƒªä¸è¶³
```bash
Error: JavaScript heap out of memory
```
**å¯¾å‡¦æ³•**: 
```json
{
  "scripts": {
    "build": "NODE_OPTIONS='--max-old-space-size=4096' next build"
  }
}
```

## ğŸ¤— Hugging Face Spacesã¸ã®ãƒ‡ãƒ—ãƒ­ã‚¤

### Dockerfileã®ä½œæˆ
```dockerfile
FROM node:18-alpine

WORKDIR /app

# ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã®ãƒ“ãƒ«ãƒ‰
COPY frontend/package*.json ./frontend/
RUN cd frontend && npm ci --only=production

COPY frontend ./frontend
RUN cd frontend && npm run build

# ãƒãƒ¼ãƒˆè¨­å®š
EXPOSE 7860

# èµ·å‹•ã‚³ãƒãƒ³ãƒ‰
CMD ["npm", "run", "start", "--prefix", "frontend"]
```

### app.pyã®ä½œæˆï¼ˆGradioå¯¾å¿œï¼‰
```python
import subprocess
import gradio as gr

def run_nextjs():
    subprocess.Popen(["npm", "run", "start", "--prefix", "frontend"])
    return "Next.js app is running on port 3000"

iface = gr.Interface(fn=run_nextjs, inputs=[], outputs="text")
iface.launch(server_port=7860)
```

## ğŸ“ ãƒ‡ãƒ—ãƒ­ã‚¤å¾Œã®ç¢ºèª

### 1. åŸºæœ¬å‹•ä½œãƒ†ã‚¹ãƒˆ
- [ ] ã‚µã‚¤ãƒˆã«ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹
- [ ] å„ãƒšãƒ¼ã‚¸ãŒæ­£ã—ãè¡¨ç¤ºã•ã‚Œã‚‹
- [ ] APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆãŒå‹•ä½œã™ã‚‹

### 2. æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆ
- [ ] æ³•äººç•ªå·APIãŒå‹•ä½œã™ã‚‹ï¼ˆã¾ãŸã¯ãƒ¢ãƒƒã‚¯ãŒå‹•ä½œï¼‰
- [ ] ç”³è«‹æ›¸ç”ŸæˆãŒå®Œäº†ã™ã‚‹
- [ ] ã‚°ãƒ©ãƒ•ãŒè¡¨ç¤ºã•ã‚Œã‚‹

### 3. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ
- [ ] ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿é€Ÿåº¦ãŒé©åˆ‡
- [ ] APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒé©åˆ‡

## ğŸ†˜ ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ­ã‚°ã®ç¢ºèªæ–¹æ³•
**Vercel**:
```bash
vercel logs production
```

**Hugging Face**:
Spaceså†…ã®Logsã‚¿ãƒ–ã§ç¢ºèª

### ã‚µãƒãƒ¼ãƒˆ
å•é¡ŒãŒè§£æ±ºã—ãªã„å ´åˆã¯ã€ä»¥ä¸‹ã‚’ç¢ºèªï¼š
1. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®è©³ç´°
2. ãƒ–ãƒ©ã‚¦ã‚¶ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã®ã‚¨ãƒ©ãƒ¼
3. ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¿ãƒ–ã®ã‚¨ãƒ©ãƒ¼
4. ãƒ‡ãƒ—ãƒ­ã‚¤ãƒ­ã‚°

## ğŸ¯ æœ€çµ‚ãƒã‚§ãƒƒã‚¯

ãƒ‡ãƒ—ãƒ­ã‚¤å‰ã«å¿…ãšå®Ÿè¡Œï¼š
```bash
# å®Œå…¨ãªãƒã‚§ãƒƒã‚¯ãƒ•ãƒ­ãƒ¼
cd /path/to/ai-subsidy-system

# 1. ã‚¯ãƒªãƒ¼ãƒ³ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
rm -rf frontend/node_modules backend/node_modules
cd frontend && npm install && cd ..
cd backend && npm install && cd ..

# 2. ã‚»ãƒ«ãƒ•ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
./scripts/pre-deploy-check.sh

# 3. ã‚¨ãƒ©ãƒ¼ãŒã‚ã‚Œã°ä¿®æ­£
./scripts/fix-common-errors.sh

# 4. æœ€çµ‚ãƒ“ãƒ«ãƒ‰ãƒ†ã‚¹ãƒˆ
cd frontend && npm run build

# 5. ã™ã¹ã¦æˆåŠŸã—ãŸã‚‰ãƒ‡ãƒ—ãƒ­ã‚¤
```

ã“ã®ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆã«å¾“ãˆã°ã€ãƒ‡ãƒ—ãƒ­ã‚¤æ™‚ã®ã‚¨ãƒ©ãƒ¼ã‚’æœ€å°é™ã«æŠ‘ãˆã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚