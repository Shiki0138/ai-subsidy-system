#!/bin/bash

echo "ðŸ§ª ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆå®Ÿè¡Œé–‹å§‹"

# æ—¢å­˜ã‚µãƒ¼ãƒãƒ¼åœæ­¢
pkill -f node 2>/dev/null || true

# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ç§»å‹•
cd backend

# ãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼èµ·å‹•ï¼ˆãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ï¼‰
echo "ðŸš€ ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼èµ·å‹•ä¸­..."
node test-local-api.js &
SERVER_PID=$!

# ã‚µãƒ¼ãƒãƒ¼èµ·å‹•å¾…æ©Ÿ
sleep 3

# ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
echo "ðŸ§ª çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œä¸­..."
cd ..
node ai-pdf-test.js

# ã‚µãƒ¼ãƒãƒ¼åœæ­¢
echo "ðŸ›‘ ãƒ†ã‚¹ãƒˆã‚µãƒ¼ãƒãƒ¼åœæ­¢ä¸­..."
kill $SERVER_PID 2>/dev/null || true

echo "âœ… ãƒ­ãƒ¼ã‚«ãƒ«ãƒ†ã‚¹ãƒˆå®Œäº†"
